var xtalert={'alertError':function(msg){swal('提示',msg,'error');},'alertInfo':function(msg){swal('提示',msg,'warning');},'alertInfoWithTitle':function(title,msg){swal(title,msg);},'alertSuccess':function(msg,confirmCallback){args={'title':'提示','text':msg,'type':'success',}
swal(args,confirmCallback);},'alertSuccessWithTitle':function(title,msg){swal(title,msg,'success');},'alertConfirm':function(params){swal({'title':params['title']?params['title']:'提示','showCancelButton':true,'showConfirmButton':true,'type':params['type']?params['type']:'','confirmButtonText':params['confirmText']?params['confirmText']:'确定','cancelButtonText':params['cancelText']?params['cancelText']:'取消','text':params['msg']?params['msg']:''},function(isConfirm){if(isConfirm){if(params['confirmCallback']){params['confirmCallback']();}}else{if(params['cancelCallback']){params['cancelCallback']();}}});},'alertOneInput':function(params){swal({'title':params['title']?params['title']:'请输入','text':params['text']?params['text']:'','type':'input','showCancelButton':true,'animation':'slide-from-top','closeOnConfirm':false,'showLoaderOnConfirm':true,'inputPlaceholder':params['placeholder']?params['placeholder']:'','confirmButtonText':params['confirmText']?params['confirmText']:'确定','cancelButtonText':params['cancelText']?params['cancelText']:'取消',},function(inputValue){if(inputValue===false)return false;if(inputValue===''){swal.showInputError('输入框不能为空！');return false;}
if(params['confirmCallback']){params['confirmCallback'](inputValue);}});},'alertNetworkError':function(){this.alertErrorToast('网络错误');},'alertInfoToast':function(msg){this.alertToast(msg,'info');},'alertErrorToast':function(msg){this.alertToast(msg,'error');},'alertSuccessToast':function(msg){if(!msg){msg='成功！';}
this.alertToast(msg,'success');},'alertToast':function(msg,type){swal({'title':msg,'text':'','type':type,'showCancelButton':false,'showConfirmButton':false,'timer':1000,});},'close':function(){swal.close();}};;$(function(){$(".delete").click(function(event){var self=$(this);var div=self.parent().parent().parent();var item_id=div.attr('data-itemId');var deleteUrl=div.attr('data-delete-url');event.preventDefault();xtalert.alertConfirm({"msg":"您确定要删除这个项目吗?",'confirmCallback':function(){$.ajax({url:'/blog/myitem/deleteitem/',type:'get',data:{'item_id':item_id},success:function(data){if(data.code==0){window.location.reload();}else{xtalert.alertInfo(data.message);}},fail:function(e){xtalert.alertNetworkError();}});}});});});$(function(){$(".update").click(function(event){var self=$(this);var div=self.parent().parent().parent();var introduce=div.attr('data-introduce');var name=div.attr('data-name');var itemId=div.attr('data-itemId');$("input[name='name']").val(name);$("textarea[name='introduce']").val(introduce);$("#save-btn").attr('data-itemId',itemId)})});$(function(){$("#save-btn").click(function(event){event.preventDefault();var self=$(this);var dialog=$("#item-dialog");var nameInput=$("input[name='name']");var introduceInput=$("textarea[name='introduce']");var name=nameInput.val();var introduce=introduceInput.val();var csrf=$("input[name='csrfmiddlewaretoken']").val();var file_url=$("input[name='file_url']").val();var item_id=self.attr('data-itemId');if(!name||!introduce||!file_url)
{xtalert.alertInfoToast('请输入完整的项目信息!');return;}
$.ajax({url:'/blog/myitem/updateitem/',type:'post',data:{'name':name,'introduce':introduce,'file_url':file_url,'csrfmiddlewaretoken':csrf,'item_id':item_id},success:function(data){dialog.modal("hide");if(data.code==0){window.location.reload();}
else{xtalert.alertInfo(data.message);}},fail:function(e){xtalert.alertNetworkError();}})})});$(function(){$("#upload-btn").click(function(){var processGroup=$("#process-group");processGroup.css('display','block');});});;